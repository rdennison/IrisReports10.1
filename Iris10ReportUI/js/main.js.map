{"version":3,"sources":["webpack:///webpack/bootstrap a88fbfbfb9d0adff5776","webpack:///./main.ts","webpack:///./controllers/index.ts","webpack:///./controllers/report-list.controller.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a88fbfbfb9d0adff5776\n **/","import './controllers';\r\n\r\n\r\n// TODO: break up Iris.js\r\n// import './Iris';\r\n// import './GridConfigFunctions.js';\r\n// import './IrisFilter.js';\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./main.ts\n **/","export * from './report-list.controller';\n\n\n\n/** WEBPACK FOOTER **\n ** ./controllers/index.ts\n **/","declare var REPORT_LIST: boolean;\n// libs\nimport * as _ from 'lodash';\n\n// app\nimport { kendoWindowDefaultOptions } from '../utils';\n\nexport default class ReportListController {\n\n    private static _instance: ReportListController;\n\n\n    static getInstance() {\n        if (!this._instance) {\n            this._instance = new ReportListController();\n        }\n        return this._instance;\n    }\n\n    lastSearchString: string;\n    /**\n     * To avoid kendo mvvm binding madness this must be static\n     */\n    private static _gridConfigSelector: kendo.ui.DropDownList;\n    private static _gridFilterSelector: kendo.ui.DropDownList;\n    private static _gridAdminToolSelector: kendo.ui.DropDownList;\n    private static _gridColumnMenu: kendo.ui.Menu;\n    toolFunctionModel: kendo.data.ObservableObject;\n    grid: kendo.ui.Grid;\n    private _searchTimer: number;\n    private notificationWindow: kendo.ui.Window;\n    keepSessionAlive = false;\n    keepSessionAliveUrl = null;\n\n\n    /**\n     * Sets grid with target element\n     * @param target\n     */\n    setGrid(target: string) {\n        let self = this;\n        this.grid = $(target).data('kendoGrid');\n        $(\"#ReportListGrid .k-grid-header\").hide(); //hide the header\n        $(\"#ReportListGrid tr.k-alt\").removeClass(\"k-alt\"); //hide the alternate color changing\n        $(\"#ReportListGrid td\").css('border-style', 'none'); //remove cell borders to make it look like a proper list\n        $('#ReportToolBar').data('kendoToolBar').element.find('#reportsearch').first().val(this.lastSearchString);\n        this.grid.dataSource.bind(\"error\", this.errorLog);\n        self._setupSessionUpdater('/Root/KeepSessionAlive');\n        self.createTools();\n        //Select a row\n        $('#ReportListGrid').data('kendoGrid').tbody.on('mousedown', function (this: HTMLElement, event: JQueryEventObject) {\n            let row: any = event.target.parentElement[\"rowIndex\"];\n            var replist: any = $(\"#ReportListGrid\").data(\"kendoGrid\");\n            $.ajax({\n                global: false,\n                type: \"POST\",\n                url: \"/RPTReportListByUser/SelectReport\",\n                data: { report: JSON.stringify(replist._data[row]) }\n            });\n        });\n\n        //Checkbox events\n        $('.fav').on('change', function () {\n            var t = event.currentTarget['checked'];\n            var replist: any = $(\"#ReportListGrid\").data(\"kendoGrid\");\n            var index = event.currentTarget[\"parentElement\"].parentElement.rowIndex;\n            $.ajax({\n                global: false,\n                type: \"POST\",\n                url: \"/RPTReportListByUser/UpdateFavorite\",\n                data: { fav: JSON.stringify(replist._data[index]), check: t }\n            }).done((data) => {\n                replist.dataSource.read();\n                });\n        \n        });\n\n        return this;\n    }\n\n    createTools() {\r\n        let self = this;\r\n\r\n        this.toolFunctionModel = kendo.observable({\r\n            \r\n            searchKeyPressed: self.searchKeyPressed.bind(self)\r\n           \r\n            \r\n        });\r\n       \r\n        kendo.bind($('#ReportToolBar'), this.toolFunctionModel);\r\n    }\r\n\n   \n    searchKeyPressed(e: KeyboardEvent) {\r\n        let timer = 1000;\r\n        let self = this;\r\n        clearTimeout(this._searchTimer);\r\n        this._searchTimer = setTimeout(function () {\r\n            self.gridSearch();\r\n        }, timer, self);\r\n        if (e.keyCode === 13) {\r\n            clearTimeout(self._searchTimer);\r\n            self.gridSearch();\r\n        }\r\n    }\r\n\r\n    gridSearch() {\r\n        const toolBar = $('#ReportToolBar').data('kendoToolBar');\r\n        const query = toolBar.element.find('#reportsearch').first().val().toUpperCase();\r\n        let searchText = toolBar.element.find('#reportsearch').first().val();\r\n        var replist: any = $(\"#ReportListGrid\").data(\"kendoGrid\");\r\n        let self = this;\r\n        self.lastSearchString = searchText;\r\n        $.ajax({\r\n            global: false,\r\n            type: \"Post\",\r\n            url: \"/ReportSearch/ReportQuery\",\r\n            data: { searchString: query }\r\n        }).done((data) => {\r\n            // All good.\r\n            if (data !== \"ready\") {\r\n                console.log(`${data}`);\r\n            } else {\r\n                replist.dataSource.read();\r\n                setTimeout(function () {\r\n                    toolBar.element.find('#reportsearch').first().val(searchText);\r\n                }, 500, toolbar, searchText);\r\n            }\r\n        });\r\n    }\r\n\n\n    saveCriteria()\n    {\n        return this;\r\n    }\n\n    deleteCriteria()\n    {\n        return this;\r\n    }\n    \n    errorLog(e) {\n        if (e.errors) {\n            console.log(\"error happened\");\n        }\n    }\n\n    onNotifications() {\n        this.notificationWindow.open();\n    }\n\n    /**\n     * Session keepalive functions\n     */\n    private _setupSessionUpdater(actionUrl) {\n        let self = this;\n        self.keepSessionAliveUrl = actionUrl;\n        var container = $(\"#body\");\n        self.keepSessionAlive = true;\n        //container.mousemove(function () { self.keepSessionAlive = true; });\n        //container.keydown(function () { self.keepSessionAlive = true; });\n        self._checkToKeepSessionAlive();\n    }\n\n    private _checkToKeepSessionAlive() {\n        let self = this;\n        setTimeout(function () {\n            self._keepSessionAlive();\n        }, 300000, self);\n    }\n\n    private _keepSessionAlive() {\n        let self = this;\n        if (self.keepSessionAlive && self.keepSessionAliveUrl != null) {\n            $.ajax({\n                global: false,\n                type: \"POST\",\n                url: self.keepSessionAliveUrl\n            }).done((data) => {\n                self.keepSessionAlive = true;\n            });\n        }\n        self._checkToKeepSessionAlive();\n    }\n\n    private constructor() {\n        this._init();\n    }\n\n    /**\n     * Initializes the controller\n     * NOTE: Do NOT include asynchronous calls in this method.\n     *       When Kendo binds to the controller it makes a copy rather\n     *       than using the instance in memory.\n     */\n    private _init() {\n        try {\n            let self = this;\n      \n            this._searchTimer = 0;\n            \n            \n        } catch (err) {\n            console.log('System not loaded yet');\n        }\n        \n    }\n\n \n}\n\n$(document).ready(() => {\n    try {\n        if (REPORT_LIST !== null && REPORT_LIST) {\n            window['ReportListDataBound'] = () => {\n                ReportListController.getInstance().setGrid('#ReportListGrid');\n            }\n        }\n        \n    } catch (err) {\n        window.console.log(`no grid to load; or grid is set in view model.`);\n    }\n}); \n\n\n\n\n/** WEBPACK FOOTER **\n ** ./controllers/report-list.controller.ts\n **/"],"sourceRoot":""}